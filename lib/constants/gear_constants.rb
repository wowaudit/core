base_items = [
  'main_hand',
  'off_hand',
  'head',
  'neck',
  'shoulder',
  'back',
  'chest',
  'wrist',
  'hands',
  'waist',
  'legs',
  'feet',
  'finger_1',
  'finger_2',
  'trinket_1',
  'trinket_2'
]

ITEMS = {
  live: base_items,
  classic_era: base_items + ['ranged'],
  classic_progression: base_items,
  classic_anniversary: base_items + ['ranged'],
}

QUALITIES = {
  POOR: 0,
  COMMON: 1,
  UNCOMMON: 2,
  RARE: 3,
  EPIC: 4,
  LEGENDARY: 5,
  ARTIFACT: 6,
  HEIRLOOM: 7,
}

weapon_enchants = {
  3370 => [4, "Rune of Razorice"],
  3847 => [4, "Rune of the Stoneskin Gargoyle"],
  3368 => [4, "Rune of the Fallen Crusader"],
  6241 => [4, "Rune of Sanguination"],
  6242 => [4, "Rune of Spellwarding"],
  6243 => [4, "Rune of Hysteria"],
  6244 => [4, "Rune of Unending Thirst"],
  6245 => [4, "Rune of the Apocalypse"],
  8038 => [2, "Acuity of the Ren'dorei (1)"],
  8039 => [4, "Acuity of the Ren'dorei (2)"],
  8040 => [2, "Arcane Mastery (1)", { mastery: 99 * 0.4 }],
  8041 => [4, "Arcane Mastery (2)", { mastery: 124 * 0.4 }],
  7982 => [2, "Berserker's Rage (1)", { haste: 99 * 0.4 }],
  7983 => [4, "Berserker's Rage (2)", { haste: 124 * 0.4 }],
  8036 => [2, "Flames of the Sin'dorei (1)"],
  8037 => [4, "Flames of the Sin'dorei (2)"],
  7980 => [2, "Jan'alai's Precision (1)", { crit: 99 * 0.4 }],
  7981 => [4, "Jan'alai's Precision (2)", { crit: 124 * 0.4 }],
  7978 => [2, "Strength of Halazzi (1)"],
  7979 => [4, "Strength of Halazzi (2)"],
  8008 => [2, "Worldsoul Aegis (1)"],
  8009 => [4, "Worldsoul Aegis (2)"],
  8006 => [2, "Worldsoul Cradle (1)"],
  8007 => [4, "Worldsoul Cradle (2)"],
  8010 => [2, "Worldsoul Tenacity (1)", { vers: 99 * 0.4 }],
  8011 => [4, "Worldsoul Tenacity (2)", { vers: 124 * 0.4 }],
}

ring_enchants = {
  7994 => [2, "Nature's Wrath (1)", { crit: 9 }],
  7995 => [2, "Nature's Wrath (2)", { crit: 13 }],
  7996 => [2, "Nature's Fury (1)", { crit: 17 }],
  7997 => [4, "Nature's Fury (2)", { crit: 22 }],
  8020 => [2, "Thalassian Haste (1)", { haste: 9 }],
  8021 => [2, "Thalassian Haste (2)", { haste: 13 }],
  8024 => [2, "Silvermoon's Alacrity (1)", { haste: 17 }],
  8025 => [4, "Silvermoon's Alacrity (2)", { haste: 22 }],
  8022 => [2, "Thalassian Versatility (1)", { vers: 9 }],
  8023 => [2, "Thalassian Versatility (2)", { vers: 13 }],
  8026 => [2, "Silvermoon's Tenacity (1)", { vers: 17 }],
  8027 => [4, "Silvermoon's Tenacity (2)", { vers: 22 }],
  7964 => [2, "Amani Mastery (1)", { mastery: 9 }],
  7965 => [2, "Amani Mastery (2)", { mastery: 13 }],
  7968 => [2, "Zul'jin's Mastery (1)", { mastery: 17 }],
  7969 => [4, "Zul'jin's Mastery (2)", { mastery: 22 }],
  7966 => [2, "Eyes of the Eagle (1)"],
  7967 => [4, "Eyes of the Eagle (2)"],
}

ENCHANTS = {
  'head' => {
    7988 => [2, "Blessing of Speed (1)"],
    7989 => [2, "Blessing of Speed (2)"],
    7990 => [2, "Empowered Blessing of Speed (1)"],
    7991 => [4, "Empowered Blessing of Speed (2)"],
    7958 => [2, "Hex of Leeching (1)"],
    7959 => [2, "Hex of Leeching (2)"],
    7960 => [2, "Empowered Hex of Leeching (1)"],
    7961 => [4, "Empowered Hex of Leeching (2)"],
    8014 => [2, "Rune of Avoidance (1)"],
    8015 => [2, "Rune of Avoidance (2)"],
    8016 => [2, "Empowered Rune of Avoidance (1)"],
    8017 => [4, "Empowered Rune of Avoidance (2)"],
  },
  'shoulder' => {
    8028 => [2, "Thalassian Recovery (1)"],
    8029 => [2, "Thalassian Recovery (2)"],
    7970 => [2, "Flight of the Eagle (1)"],
    7971 => [2, "Flight of the Eagle (2)"],
    7998 => [2, "Nature's Grace (1)"],
    7999 => [2, "Nature's Grace (2)"],
    7972 => [2, "Akil'zon's Swiftness (1)"],
    7973 => [4, "Akil'zon's Swiftness (2)"],
    8000 => [2, "Amirdrassil's Grace (1)"],
    8001 => [4, "Amirdrassil's Grace (2)"],
    8030 => [2, "Silvermoon's Mending (1)"],
    8031 => [4, "Silvermoon's Mending (2)"],
  },
  'chest' => {
    7956 => [2, "Mark of Nalorakk (1)"],
    7957 => [4, "Mark of Nalorakk (2)"],
    8012 => [2, "Mark of the Magister (1)"],
    8013 => [4, "Mark of the Magister (2)"],
    7984 => [2, "Mark of the Rootwarden (1)"],
    7985 => [4, "Mark of the Rootwarden (2)"],
    7986 => [2, "Mark of the Worldsoul (1)"],
    7987 => [4, "Mark of the Worldsoul (2)"],
  },
  'legs' => {
    7938 => [2, "Bright Linen Spellthread (1)"],
    7939 => [2, "Bright Linen Spellthread (2)"],
    7936 => [2, "Arcanoweave Spellthread (1)"],
    7937 => [4, "Arcanoweave Spellthread (2)"],
    7934 => [2, "Sunfire Silk Spellthread (1)"],
    7935 => [4, "Sunfire Silk Spellthread (2)"],
    8160 => [2, "Thalassian Scout Armor Kit (1)"],
    8161 => [2, "Thalassian Scout Armor Kit (2)"],
    8158 => [2, "Forest Hunter's Armor Kit (1)"],
    8159 => [4, "Forest Hunter's Armor Kit (2)"],
    8162 => [2, "Blood Knight's Armor Kit (1)"],
    8163 => [4, "Blood Knight's Armor Kit (2)"],
  },
  'feet' => {
    8018 => [2, "Farstrider's Hunt (1)"],
    8019 => [4, "Farstrider's Hunt (2)"],
    7962 => [2, "Lynx's Dexterity (1)"],
    7963 => [4, "Lynx's Dexterity (2)"],
    7992 => [2, "Shaladrassil's Roots (1)"],
    7993 => [4, "Shaladrassil's Roots (2)"],
  },
  'finger_1' => ring_enchants,
  'finger_2' => ring_enchants,
  'main_hand' => weapon_enchants,
  'off_hand' => weapon_enchants,
}

GEM_QUALITY_MAPPING = {
  legacy: 1,
  uncommon: 2,
  rare: 3,
  epic: 4,
  legendary: 4,
}

TRACKED_STATS = {
  VERSATILITY: :vers,
  MASTERY_RATING: :mastery,
  HASTE_RATING: :haste,
  CRIT_RATING: :crit,
}

DIFFICULTY_LETTERS = ['M', 'H', 'N', 'R']

GEMS = {
  192900=>{:quality=>1, :name=>"Crafty Queen's Ruby (1)", :stats=>{:crit=>1, :haste=>1}},
  192901=>{:quality=>1, :name=>"Crafty Queen's Ruby (2)", :stats=>{:haste=>1, :crit=>1}},
  192902=>{:quality=>1, :name=>"Crafty Queen's Ruby (3)", :stats=>{:haste=>2, :crit=>2}},
  192917=>{:quality=>1, :name=>"Crafty Alexstraszite (1)", :stats=>{:crit=>3, :haste=>2}},
  192918=>{:quality=>1, :name=>"Crafty Alexstraszite (2)", :stats=>{:crit=>4, :haste=>2}},
  192919=>{:quality=>1, :name=>"Crafty Alexstraszite (3)", :stats=>{:crit=>5, :haste=>2}},
  192983=>{:quality=>1, :name=>"Fierce Illimited Diamond (1)", :stats=>{:haste=>3}},
  192984=>{:quality=>1, :name=>"Fierce Illimited Diamond (2)", :stats=>{:haste=>4}},
  192985=>{:quality=>1, :name=>"Fierce Illimited Diamond (3)", :stats=>{:haste=>4}},
  192903=>{:quality=>1, :name=>"Zen Mystic Sapphire (1)", :stats=>{:vers=>1, :mastery=>1}},
  192904=>{:quality=>1, :name=>"Zen Mystic Sapphire (2)", :stats=>{:vers=>1, :mastery=>1}},
  192905=>{:quality=>1, :name=>"Zen Mystic Sapphire (3)", :stats=>{:vers=>2, :mastery=>2}},
  192906=>{:quality=>1, :name=>"Energized Vibrant Emerald (1)", :stats=>{:haste=>1, :vers=>1}},
  192907=>{:quality=>1, :name=>"Energized Vibrant Emerald (2)", :stats=>{:haste=>1, :vers=>1}},
  192908=>{:quality=>1, :name=>"Energized Vibrant Emerald (3)", :stats=>{:haste=>2, :vers=>2}},
  192910=>{:quality=>1, :name=>"Sensei's Sundered Onyx (1)", :stats=>{:mastery=>1, :crit=>1}},
  192911=>{:quality=>1, :name=>"Sensei's Sundered Onyx (2)", :stats=>{:mastery=>1, :crit=>1}},
  192912=>{:quality=>1, :name=>"Sensei's Sundered Onyx (3)", :stats=>{:mastery=>2, :crit=>2}},
  192913=>{:quality=>1, :name=>"Solid Eternity Amber (1)", :stats=>{}},
  192914=>{:quality=>1, :name=>"Solid Eternity Amber (2)", :stats=>{}},
  192916=>{:quality=>1, :name=>"Solid Eternity Amber (3)", :stats=>{}},
  192920=>{:quality=>1, :name=>"Sensei's Alexstraszite (1)", :stats=>{:crit=>3, :mastery=>2}},
  192921=>{:quality=>1, :name=>"Sensei's Alexstraszite (2)", :stats=>{:crit=>4, :mastery=>2}},
  192922=>{:quality=>1, :name=>"Sensei's Alexstraszite (3)", :stats=>{:crit=>5, :mastery=>2}},
  192923=>{:quality=>1, :name=>"Radiant Alexstraszite (1)", :stats=>{:crit=>3, :vers=>2}},
  192924=>{:quality=>1, :name=>"Radiant Alexstraszite (2)", :stats=>{:crit=>4, :vers=>2}},
  192925=>{:quality=>1, :name=>"Radiant Alexstraszite (3)", :stats=>{:crit=>5, :vers=>2}},
  192926=>{:quality=>1, :name=>"Deadly Alexstraszite (1)", :stats=>{:crit=>4}},
  192927=>{:quality=>1, :name=>"Deadly Alexstraszite (2)", :stats=>{:crit=>5}},
  192928=>{:quality=>1, :name=>"Deadly Alexstraszite (3)", :stats=>{:crit=>6}},
  192933=>{:quality=>1, :name=>"Energized Malygite (1)", :stats=>{:vers=>3, :haste=>2}},
  192934=>{:quality=>1, :name=>"Energized Malygite (2)", :stats=>{:vers=>4, :haste=>2}},
  192935=>{:quality=>1, :name=>"Energized Malygite (3)", :stats=>{:vers=>5, :haste=>2}},
  192936=>{:quality=>1, :name=>"Zen Malygite (1)", :stats=>{:vers=>3, :mastery=>2}},
  192937=>{:quality=>1, :name=>"Zen Malygite (2)", :stats=>{:vers=>4, :mastery=>2}},
  192938=>{:quality=>1, :name=>"Zen Malygite (3)", :stats=>{:vers=>5, :mastery=>2}},
  192929=>{:quality=>1, :name=>"Radiant Malygite (1)", :stats=>{:vers=>3, :crit=>2}},
  192931=>{:quality=>1, :name=>"Radiant Malygite (2)", :stats=>{:vers=>4, :crit=>2}},
  192932=>{:quality=>1, :name=>"Radiant Malygite (3)", :stats=>{:vers=>5, :crit=>2}},
  192940=>{:quality=>1, :name=>"Stormy Malygite (1)", :stats=>{:vers=>4}},
  192941=>{:quality=>1, :name=>"Stormy Malygite (2)", :stats=>{:vers=>5}},
  192942=>{:quality=>1, :name=>"Stormy Malygite (3)", :stats=>{:vers=>6}},
  192950=>{:quality=>1, :name=>"Energized Ysemerald (1)", :stats=>{:haste=>3, :vers=>2}},
  192951=>{:quality=>1, :name=>"Energized Ysemerald (2)", :stats=>{:haste=>4, :vers=>2}},
  192952=>{:quality=>1, :name=>"Energized Ysemerald (3)", :stats=>{:haste=>5, :vers=>2}},
  192946=>{:quality=>1, :name=>"Keen Ysemerald (1)", :stats=>{:haste=>3, :mastery=>2}},
  192947=>{:quality=>1, :name=>"Keen Ysemerald (2)", :stats=>{:haste=>4, :mastery=>2}},
  192948=>{:quality=>1, :name=>"Keen Ysemerald (3)", :stats=>{:haste=>5, :mastery=>2}},
  192943=>{:quality=>1, :name=>"Crafty Ysemerald (1)", :stats=>{:haste=>3, :crit=>2}},
  192944=>{:quality=>1, :name=>"Crafty Ysemerald (2)", :stats=>{:haste=>4, :crit=>2}},
  192945=>{:quality=>1, :name=>"Crafty Ysemerald (3)", :stats=>{:haste=>5, :crit=>2}},
  192953=>{:quality=>1, :name=>"Quick Ysemerald (1)", :stats=>{:haste=>4}},
  192954=>{:quality=>1, :name=>"Quick Ysemerald (2)", :stats=>{:haste=>5}},
  192955=>{:quality=>1, :name=>"Quick Ysemerald (3)", :stats=>{:haste=>6}},
  192962=>{:quality=>1, :name=>"Zen Neltharite (1)", :stats=>{:mastery=>3, :vers=>2}},
  192963=>{:quality=>1, :name=>"Zen Neltharite (2)", :stats=>{:mastery=>4, :vers=>2}},
  192964=>{:quality=>1, :name=>"Zen Neltharite (3)", :stats=>{:mastery=>5, :vers=>2}},
  192959=>{:quality=>1, :name=>"Keen Neltharite (1)", :stats=>{:mastery=>3, :haste=>2}},
  192960=>{:quality=>1, :name=>"Keen Neltharite (2)", :stats=>{:mastery=>4, :haste=>2}},
  192961=>{:quality=>1, :name=>"Keen Neltharite (3)", :stats=>{:mastery=>5, :haste=>2}},
  192956=>{:quality=>1, :name=>"Sensei's Neltharite (1)", :stats=>{:mastery=>3, :crit=>2}},
  192957=>{:quality=>1, :name=>"Sensei's Neltharite (2)", :stats=>{:mastery=>4, :crit=>2}},
  192958=>{:quality=>1, :name=>"Sensei's Neltharite (3)", :stats=>{:mastery=>5, :crit=>2}},
  192965=>{:quality=>1, :name=>"Fractured Neltharite (1)", :stats=>{:mastery=>4}},
  192966=>{:quality=>1, :name=>"Fractured Neltharite (2)", :stats=>{:mastery=>5}},
  192967=>{:quality=>1, :name=>"Fractured Neltharite (3)", :stats=>{:mastery=>6}},
  192968=>{:quality=>1, :name=>"Jagged Nozdorite (1)", :stats=>{:crit=>2}},
  192969=>{:quality=>1, :name=>"Jagged Nozdorite (2)", :stats=>{:crit=>2}},
  192970=>{:quality=>1, :name=>"Jagged Nozdorite (3)", :stats=>{:crit=>2}},
  192971=>{:quality=>1, :name=>"Forceful Nozdorite (1)", :stats=>{:haste=>2}},
  192972=>{:quality=>1, :name=>"Forceful Nozdorite (2)", :stats=>{:haste=>2}},
  192973=>{:quality=>1, :name=>"Forceful Nozdorite (3)", :stats=>{:haste=>2}},
  192974=>{:quality=>1, :name=>"Puissant Nozdorite (1)", :stats=>{:mastery=>2}},
  192975=>{:quality=>1, :name=>"Puissant Nozdorite (2)", :stats=>{:mastery=>2}},
  192976=>{:quality=>1, :name=>"Puissant Nozdorite (3)", :stats=>{:mastery=>2}},
  192977=>{:quality=>1, :name=>"Steady Nozdorite (1)", :stats=>{:vers=>2}},
  192978=>{:quality=>1, :name=>"Steady Nozdorite (2)", :stats=>{:vers=>2}},
  192979=>{:quality=>1, :name=>"Steady Nozdorite (3)", :stats=>{:vers=>2}},
  192980=>{:quality=>1, :name=>"Inscribed Illimited Diamond (1)", :stats=>{:crit=>3}},
  192981=>{:quality=>1, :name=>"Inscribed Illimited Diamond (2)", :stats=>{:crit=>4}},
  192982=>{:quality=>1, :name=>"Inscribed Illimited Diamond (3)", :stats=>{:crit=>4}},
  192986=>{:quality=>1, :name=>"Skillful Illimited Diamond (1)", :stats=>{:mastery=>3}},
  192987=>{:quality=>1, :name=>"Skillful Illimited Diamond (2)", :stats=>{:mastery=>4}},
  192988=>{:quality=>1, :name=>"Skillful Illimited Diamond (3)", :stats=>{:mastery=>4}},
  192989=>{:quality=>1, :name=>"Resplendent Illimited Diamond (1)", :stats=>{:vers=>3}},
  192990=>{:quality=>1, :name=>"Resplendent Illimited Diamond (2)", :stats=>{:vers=>4}},
  192991=>{:quality=>1, :name=>"Resplendent Illimited Diamond (3)", :stats=>{:vers=>4}},
  213453=>{:quality=>1, :name=>"Quick Ruby (1)", :stats=>{:crit=>8, :haste=>3}},
  213454=>{:quality=>1, :name=>"Quick Ruby (2)", :stats=>{:crit=>9, :haste=>3}},
  213456=>{:quality=>1, :name=>"Masterful Ruby (1)", :stats=>{:crit=>8, :mastery=>3}},
  213457=>{:quality=>1, :name=>"Masterful Ruby (2)", :stats=>{:crit=>9, :mastery=>3}},
  213458=>{:quality=>1, :name=>"Masterful Ruby (3)", :stats=>{:crit=>10, :mastery=>3}},
  213459=>{:quality=>1, :name=>"Versatile Ruby (1)", :stats=>{:crit=>8, :vers=>3}},
  213460=>{:quality=>1, :name=>"Versatile Ruby (2)", :stats=>{:crit=>9, :vers=>3}},
  213461=>{:quality=>1, :name=>"Versatile Ruby (3)", :stats=>{:crit=>10, :vers=>3}},
  213462=>{:quality=>1, :name=>"Deadly Ruby (1)", :stats=>{:crit=>9}},
  213463=>{:quality=>1, :name=>"Deadly Ruby (2)", :stats=>{:crit=>11}},
  213464=>{:quality=>1, :name=>"Deadly Ruby (3)", :stats=>{:crit=>12}},
  213465=>{:quality=>1, :name=>"Deadly Sapphire (1)", :stats=>{:vers=>8, :crit=>3}},
  213466=>{:quality=>1, :name=>"Deadly Sapphire (2)", :stats=>{:vers=>9, :crit=>3}},
  213467=>{:quality=>1, :name=>"Deadly Sapphire (3)", :stats=>{:vers=>10, :crit=>3}},
  213468=>{:quality=>1, :name=>"Quick Sapphire (1)", :stats=>{:vers=>8, :haste=>3}},
  213469=>{:quality=>1, :name=>"Quick Sapphire (2)", :stats=>{:vers=>9, :haste=>3}},
  213470=>{:quality=>1, :name=>"Quick Sapphire (3)", :stats=>{:vers=>10, :haste=>3}},
  213471=>{:quality=>1, :name=>"Masterful Sapphire (1)", :stats=>{:vers=>8, :mastery=>3}},
  213472=>{:quality=>1, :name=>"Masterful Sapphire (2)", :stats=>{:vers=>9, :mastery=>3}},
  213473=>{:quality=>1, :name=>"Masterful Sapphire (3)", :stats=>{:vers=>10, :mastery=>3}},
  213474=>{:quality=>1, :name=>"Versatile Sapphire (1)", :stats=>{:vers=>9}},
  213475=>{:quality=>1, :name=>"Versatile Sapphire (2)", :stats=>{:vers=>11}},
  213476=>{:quality=>1, :name=>"Versatile Sapphire (3)", :stats=>{:vers=>12}},
  213477=>{:quality=>1, :name=>"Deadly Emerald (1)", :stats=>{:haste=>8, :crit=>3}},
  213478=>{:quality=>1, :name=>"Deadly Emerald (2)", :stats=>{:haste=>9, :crit=>3}},
  213479=>{:quality=>1, :name=>"Deadly Emerald (3)", :stats=>{:haste=>10, :crit=>3}},
  213480=>{:quality=>1, :name=>"Masterful Emerald (1)", :stats=>{:haste=>8, :mastery=>3}},
  213481=>{:quality=>1, :name=>"Masterful Emerald (2)", :stats=>{:haste=>9, :mastery=>3}},
  213482=>{:quality=>1, :name=>"Masterful Emerald (3)", :stats=>{:haste=>10, :mastery=>3}},
  213483=>{:quality=>1, :name=>"Versatile Emerald (1)", :stats=>{:haste=>8, :vers=>3}},
  213484=>{:quality=>1, :name=>"Versatile Emerald (2)", :stats=>{:haste=>9, :vers=>3}},
  213485=>{:quality=>1, :name=>"Versatile Emerald (3)", :stats=>{:haste=>10, :vers=>3}},
  213486=>{:quality=>1, :name=>"Quick Emerald (1)", :stats=>{:haste=>9}},
  213487=>{:quality=>1, :name=>"Quick Emerald (2)", :stats=>{:haste=>11}},
  213488=>{:quality=>1, :name=>"Quick Emerald (3)", :stats=>{:haste=>12}},
  213489=>{:quality=>1, :name=>"Deadly Onyx (1)", :stats=>{:mastery=>8, :crit=>3}},
  213490=>{:quality=>1, :name=>"Deadly Onyx (2)", :stats=>{:mastery=>9, :crit=>3}},
  213491=>{:quality=>1, :name=>"Deadly Onyx (3)", :stats=>{:mastery=>10, :crit=>3}},
  213492=>{:quality=>1, :name=>"Quick Onyx (1)", :stats=>{:mastery=>8, :haste=>3}},
  213493=>{:quality=>1, :name=>"Quick Onyx (2)", :stats=>{:mastery=>9, :haste=>3}},
  213494=>{:quality=>1, :name=>"Quick Onyx (3)", :stats=>{:mastery=>10, :haste=>3}},
  213495=>{:quality=>1, :name=>"Versatile Onyx (1)", :stats=>{:mastery=>8, :vers=>3}},
  213496=>{:quality=>1, :name=>"Versatile Onyx (2)", :stats=>{:mastery=>9, :vers=>3}},
  213497=>{:quality=>1, :name=>"Versatile Onyx (3)", :stats=>{:mastery=>10, :vers=>3}},
  213498=>{:quality=>1, :name=>"Masterful Onyx (1)", :stats=>{:mastery=>9}},
  213499=>{:quality=>1, :name=>"Masterful Onyx (2)", :stats=>{:mastery=>11}},
  213500=>{:quality=>1, :name=>"Masterful Onyx (3)", :stats=>{:mastery=>12}},
  213501=>{:quality=>1, :name=>"Deadly Amber (1)", :stats=>{:crit=>3}},
  213502=>{:quality=>1, :name=>"Deadly Amber (2)", :stats=>{:crit=>3}},
  213503=>{:quality=>1, :name=>"Deadly Amber (3)", :stats=>{:crit=>3}},
  213504=>{:quality=>1, :name=>"Quick Amber (1)", :stats=>{:haste=>3}},
  213505=>{:quality=>1, :name=>"Quick Amber (2)", :stats=>{:haste=>3}},
  213506=>{:quality=>1, :name=>"Quick Amber (3)", :stats=>{:haste=>3}},
  213507=>{:quality=>1, :name=>"Masterful Amber (1)", :stats=>{:mastery=>3}},
  213508=>{:quality=>1, :name=>"Masterful Amber (2)", :stats=>{:mastery=>3}},
  213509=>{:quality=>1, :name=>"Masterful Amber (3)", :stats=>{:mastery=>3}},
  213510=>{:quality=>1, :name=>"Versatile Amber (1)", :stats=>{:vers=>3}},
  213511=>{:quality=>1, :name=>"Versatile Amber (2)", :stats=>{:vers=>3}},
  213512=>{:quality=>1, :name=>"Versatile Amber (3)", :stats=>{:vers=>3}},
  213515=>{:quality=>1, :name=>"Solid Amber (1)", :stats=>{}},
  213516=>{:quality=>1, :name=>"Solid Amber (2)", :stats=>{}},
  213517=>{:quality=>1, :name=>"Solid Amber (3)", :stats=>{}},
  213455=>{:quality=>1, :name=>"Quick Ruby (3)", :stats=>{:crit=>10, :haste=>3}},
  213738=>{:quality=>1, :name=>"Insightful Blasphemite (1)", :stats=>{}},
  213739=>{:quality=>1, :name=>"Insightful Blasphemite (2)", :stats=>{}},
  213740=>{:quality=>1, :name=>"Insightful Blasphemite (3)", :stats=>{}},
  213741=>{:quality=>1, :name=>"Culminating Blasphemite (1)", :stats=>{}},
  213742=>{:quality=>1, :name=>"Culminating Blasphemite (2)", :stats=>{}},
  213743=>{:quality=>1, :name=>"Culminating Blasphemite (3)", :stats=>{}},
  213744=>{:quality=>1, :name=>"Elusive Blasphemite (1)", :stats=>{}},
  213745=>{:quality=>1, :name=>"Elusive Blasphemite (2)", :stats=>{}},
  213746=>{:quality=>1, :name=>"Elusive Blasphemite (3)", :stats=>{}},
  241144=>{:quality=>4, :name=>"Enduring Heliotrope ()", :stats=>{}},
  241143=>{:quality=>4, :name=>"Cognitive Heliotrope ()", :stats=>{}},
  241142=>{:quality=>4, :name=>"Determined Heliotrope ()", :stats=>{}},
  217113=>{:quality=>1, :name=>"Cubic Blasphemia (1)", :stats=>{}},
  217114=>{:quality=>1, :name=>"Cubic Blasphemia (2)", :stats=>{}},
  217115=>{:quality=>1, :name=>"Cubic Blasphemia (3)", :stats=>{}},
  240879=>{:quality=>2, :name=>"Versatile Lapis (1)", :stats=>{:vers=>7}},
  240880=>{:quality=>2, :name=>"Versatile Lapis (2)", :stats=>{:vers=>9}},
  240911=>{:quality=>2, :name=>"Flawless Versatile Lapis (1)", :stats=>{:vers=>12}},
  240912=>{:quality=>4, :name=>"Flawless Versatile Lapis (2)", :stats=>{:vers=>14}},
  240881=>{:quality=>2, :name=>"Deadly Lapis (1)", :stats=>{:vers=>6, :crit=>2}},
  240882=>{:quality=>2, :name=>"Deadly Lapis (2)", :stats=>{:vers=>7, :crit=>3}},
  240913=>{:quality=>2, :name=>"Flawless Deadly Lapis (1)", :stats=>{:vers=>10, :crit=>4}},
  240914=>{:quality=>4, :name=>"Flawless Deadly Lapis (2)", :stats=>{:vers=>12, :crit=>5}},
  240883=>{:quality=>2, :name=>"Quick Lapis (1)", :stats=>{:vers=>6, :haste=>2}},
  240884=>{:quality=>2, :name=>"Quick Lapis (2)", :stats=>{:vers=>7, :haste=>3}},
  240915=>{:quality=>2, :name=>"Flawless Quick Lapis (1)", :stats=>{:vers=>10, :haste=>4}},
  240916=>{:quality=>4, :name=>"Flawless Quick Lapis (2)", :stats=>{:vers=>12, :haste=>5}},
  240885=>{:quality=>2, :name=>"Masterful Lapis (1)", :stats=>{:vers=>6, :mastery=>2}},
  240886=>{:quality=>2, :name=>"Masterful Lapis (2)", :stats=>{:vers=>7, :mastery=>3}},
  240917=>{:quality=>2, :name=>"Flawless Masterful Lapis (1)", :stats=>{:vers=>10, :mastery=>4}},
  240918=>{:quality=>4, :name=>"Flawless Masterful Lapis (2)", :stats=>{:vers=>12, :mastery=>5}},
  240855=>{:quality=>2, :name=>"Quick Peridot (1)", :stats=>{:haste=>7}},
  240856=>{:quality=>2, :name=>"Quick Peridot (2)", :stats=>{:haste=>9}},
  240887=>{:quality=>2, :name=>"Flawless Quick Peridot (1)", :stats=>{:haste=>12}},
  240888=>{:quality=>4, :name=>"Flawless Quick Peridot (2)", :stats=>{:haste=>14}},
  240857=>{:quality=>2, :name=>"Deadly Peridot (1)", :stats=>{:haste=>6, :crit=>2}},
  240858=>{:quality=>2, :name=>"Deadly Peridot (2)", :stats=>{:haste=>7, :crit=>3}},
  240889=>{:quality=>2, :name=>"Flawless Deadly Peridot (1)", :stats=>{:haste=>10, :crit=>4}},
  240890=>{:quality=>4, :name=>"Flawless Deadly Peridot (2)", :stats=>{:haste=>12, :crit=>5}},
  240859=>{:quality=>2, :name=>"Masterful Peridot (1)", :stats=>{:haste=>6, :mastery=>2}},
  240860=>{:quality=>2, :name=>"Masterful Peridot (2)", :stats=>{:haste=>7, :mastery=>3}},
  240891=>{:quality=>2, :name=>"Flawless Masterful Peridot (1)", :stats=>{:haste=>10, :mastery=>4}},
  240892=>{:quality=>4, :name=>"Flawless Masterful Peridot (2)", :stats=>{:haste=>12, :mastery=>5}},
  240861=>{:quality=>2, :name=>"Versatile Peridot (1)", :stats=>{:haste=>6, :vers=>2}},
  240862=>{:quality=>2, :name=>"Versatile Peridot (2)", :stats=>{:haste=>7, :vers=>3}},
  240893=>{:quality=>2, :name=>"Flawless Versatile Peridot (1)", :stats=>{:haste=>10, :vers=>4}},
  240894=>{:quality=>4, :name=>"Flawless Versatile Peridot (2)", :stats=>{:haste=>12, :vers=>5}},
  240863=>{:quality=>2, :name=>"Masterful Amethyst (1)", :stats=>{:mastery=>7}},
  240864=>{:quality=>2, :name=>"Masterful Amethyst (2)", :stats=>{:mastery=>9}},
  240895=>{:quality=>2, :name=>"Flawless Masterful Amethyst (1)", :stats=>{:mastery=>12}},
  240896=>{:quality=>4, :name=>"Flawless Masterful Amethyst (2)", :stats=>{:mastery=>14}},
  240865=>{:quality=>2, :name=>"Deadly Amethyst (1)", :stats=>{:mastery=>6, :crit=>2}},
  240866=>{:quality=>2, :name=>"Deadly Amethyst (2)", :stats=>{:mastery=>7, :crit=>3}},
  240897=>{:quality=>2, :name=>"Flawless Deadly Amethyst (1)", :stats=>{:mastery=>10, :crit=>4}},
  240898=>{:quality=>4, :name=>"Flawless Deadly Amethyst (2)", :stats=>{:mastery=>12, :crit=>5}},
  240867=>{:quality=>2, :name=>"Quick Amethyst (1)", :stats=>{:mastery=>6, :haste=>2}},
  240868=>{:quality=>2, :name=>"Quick Amethyst (2)", :stats=>{:mastery=>7, :haste=>3}},
  240899=>{:quality=>2, :name=>"Flawless Quick Amethyst (1)", :stats=>{:mastery=>10, :haste=>4}},
  240900=>{:quality=>4, :name=>"Flawless Quick Amethyst (2)", :stats=>{:mastery=>12, :haste=>5}},
  240869=>{:quality=>2, :name=>"Versatile Amethyst (1)", :stats=>{:mastery=>6, :vers=>2}},
  240870=>{:quality=>2, :name=>"Versatile Amethyst (2)", :stats=>{:mastery=>7, :vers=>3}},
  240901=>{:quality=>2, :name=>"Flawless Versatile Amethyst (1)", :stats=>{:mastery=>10, :vers=>4}},
  240902=>{:quality=>4, :name=>"Flawless Versatile Amethyst (2)", :stats=>{:mastery=>12, :vers=>5}},
  240871=>{:quality=>2, :name=>"Deadly Garnet (1)", :stats=>{:crit=>7}},
  240872=>{:quality=>2, :name=>"Deadly Garnet (2)", :stats=>{:crit=>9}},
  240903=>{:quality=>2, :name=>"Flawless Deadly Garnet (1)", :stats=>{:crit=>12}},
  240904=>{:quality=>4, :name=>"Flawless Deadly Garnet (2)", :stats=>{:crit=>14}},
  240873=>{:quality=>2, :name=>"Quick Garnet (1)", :stats=>{:crit=>6, :haste=>2}},
  240874=>{:quality=>2, :name=>"Quick Garnet (2)", :stats=>{:crit=>7, :haste=>3}},
  240905=>{:quality=>2, :name=>"Flawless Quick Garnet (1)", :stats=>{:crit=>10, :haste=>4}},
  240906=>{:quality=>4, :name=>"Flawless Quick Garnet (2)", :stats=>{:crit=>12, :haste=>5}},
  240875=>{:quality=>2, :name=>"Masterful Garnet (1)", :stats=>{:crit=>6, :mastery=>2}},
  240876=>{:quality=>2, :name=>"Masterful Garnet (2)", :stats=>{:crit=>7, :mastery=>3}},
  240907=>{:quality=>2, :name=>"Flawless Masterful Garnet (1)", :stats=>{:crit=>10, :mastery=>4}},
  240908=>{:quality=>4, :name=>"Flawless Masterful Garnet (2)", :stats=>{:crit=>12, :mastery=>5}},
  240877=>{:quality=>2, :name=>"Versatile Garnet (1)", :stats=>{:crit=>6, :vers=>2}},
  240878=>{:quality=>2, :name=>"Versatile Garnet (2)", :stats=>{:crit=>7, :vers=>3}},
  240909=>{:quality=>2, :name=>"Flawless Versatile Garnet (1)", :stats=>{:crit=>10, :vers=>4}},
  240910=>{:quality=>4, :name=>"Flawless Versatile Garnet (2)", :stats=>{:crit=>12, :vers=>5}},
  240982=>{:quality=>2, :name=>"Indecipherable Eversong Diamond (1)", :stats=>{}},
  240983=>{:quality=>4, :name=>"Indecipherable Eversong Diamond (2)", :stats=>{}},
  240970=>{:quality=>2, :name=>"Stoic Eversong Diamond (1)", :stats=>{}},
  240971=>{:quality=>4, :name=>"Stoic Eversong Diamond (2)", :stats=>{}},
  240966=>{:quality=>2, :name=>"Powerful Eversong Diamond (1)", :stats=>{}},
  240967=>{:quality=>4, :name=>"Powerful Eversong Diamond (2)", :stats=>{}},
  240968=>{:quality=>2, :name=>"Telluric Eversong Diamond (1)", :stats=>{}},
  240969=>{:quality=>4, :name=>"Telluric Eversong Diamond (2)", :stats=>{}},
}

EPIC_GEMS = {
  192980 => 1, # Dragonflight, Epic (385)
  192983 => 1,
  192989 => 1,
  192986 => 1,
  194112 => 1,
  192987 => 1, # Epic (400)
  192981 => 1,
  192990 => 1,
  192984 => 1,
  194113 => 1,
  192985 => 1, # Epic (415)
  192982 => 1,
  192988 => 1,
  192991 => 1,
  194114 => 1,
  213741 => 1, # War Within, Epic (580)
  213744 => 1,
  213738 => 1,
  217113 => 1,
  213739 => 1, # Epic (595)
  213742 => 1,
  213745 => 1,
  217114 => 1,
  213743 => 1, # Epic (610)
  213746 => 1,
  213740 => 1,
  217115 => 1,
  240982 => 2,  # Midnight, Rank 1
  240970 => 2,
  240966 => 2,
  240968 => 2,
  240983 => 4,   # Midnight, Rank 2
  240971 => 4,
  240967 => 4,
  240969 => 4,
}

TIER_ITEMS_BY_SLOT = {
  'head' => [
    # Season 1
    250042, 250033, 250015, 249988, 250024, 249979, 249970, 250060, 249961, 250051, 249997, 249952, 250006
  ],
  'shoulder' => [
    # Season 1
    249968, 250013, 249986, 250058, 250022, 250004, 250031, 249950, 249959, 250040, 249977, 249995, 250049
  ],
  'chest' => [
    # Season 1
    250063, 249973, 249982, 250009, 250045, 250027, 249964, 250036, 249991, 250018, 249955, 250000, 250054
  ],
  'hands' => [
    # Season 1
    249989, 250016, 250007, 250061, 249962, 250043, 249971, 249980, 249953, 250034, 250052, 249998, 250025
  ],
  'legs' => [
    # Season 1
    250023, 250014, 249996, 250041, 249978, 250050, 249987, 250005, 250059, 249969, 249960, 250032, 249951
  ],
}

TIER_ITEMS = TIER_ITEMS_BY_SLOT.values.flatten

LEGACY_TIER_CUTOFFS = { 1 => 'R', 253 => 'N', 266 => 'H', 279 => 'M' }
